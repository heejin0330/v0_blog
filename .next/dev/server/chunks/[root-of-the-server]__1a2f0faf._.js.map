{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/cording/PJT_JAEHAN/v0_blog/app/api/watch/search/route.ts"],"sourcesContent":["import { type NextRequest, NextResponse } from \"next/server\";\n\n// Tavily API 검색 결과 타입\ninterface TavilySearchResult {\n  title: string;\n  url: string;\n  content: string;\n  score: number;\n}\n\ninterface TavilySearchResponse {\n  query: string;\n  follow_up_questions?: string[];\n  answer?: string;\n  response_time: number;\n  results: TavilySearchResult[];\n}\n\n// Tavily API로 웹 검색\nasync function searchWebWithTavily(query: string): Promise<{\n  results: TavilySearchResult[];\n  answer?: string;\n}> {\n  const tavilyApiKey = process.env.TAVILY_API_KEY;\n\n  if (!tavilyApiKey) {\n    console.warn(\"Tavily API 키가 설정되지 않았습니다.\");\n    return { results: [] };\n  }\n\n  try {\n    const response = await fetch(\"https://api.tavily.com/search\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        api_key: tavilyApiKey,\n        query: query,\n        search_depth: \"basic\",\n        include_answer: true,\n        include_raw_content: false,\n        max_results: 3,\n      }),\n    });\n\n    if (!response.ok) {\n      throw new Error(\"Tavily API 호출 실패\");\n    }\n\n    const data: TavilySearchResponse = await response.json();\n    return {\n      results: data.results || [],\n      answer: data.answer,\n    };\n  } catch (error) {\n    console.error(\"Tavily 검색 오류:\", error);\n    return { results: [] };\n  }\n}\n\nexport async function POST(request: NextRequest) {\n  try {\n    const { modelName } = await request.json();\n\n    if (!modelName) {\n      return NextResponse.json(\n        { error: \"모델명을 입력해주세요.\" },\n        { status: 400 }\n      );\n    }\n\n    // 기본 시계 정보 (기존 로직)\n    const mockData = getWatchInfo(modelName);\n    const watchInfo = mockData || {\n      brand: extractBrand(modelName),\n      modelName: modelName,\n      referenceNumber: \"Unknown\",\n      caliber: \"자동\",\n      caseSize: \"40mm\",\n      caseMaterial: \"스테인리스 스틸\",\n      waterResistance: \"100m\",\n      thumbnailUrl: `/placeholder.svg?height=128&width=128&query=${encodeURIComponent(\n        modelName\n      )} watch`,\n    };\n\n    // Tavily API로 웹 검색 결과 가져오기\n    const searchQuery = `${watchInfo.brand} ${watchInfo.modelName} 스펙 사양`;\n    const searchData = await searchWebWithTavily(searchQuery);\n\n    // 검색 결과에서 사양 정보 추출\n    const extractedSpecs = extractSpecsFromSearchResults(\n      searchData.results,\n      searchData.answer,\n      watchInfo.modelName\n    );\n\n    // 추출한 사양 정보로 기본 정보 업데이트 (기본값이거나 Unknown인 경우만)\n    const updatedWatchInfo = {\n      ...watchInfo,\n      ...(extractedSpecs.caliber &&\n      (!watchInfo.caliber || watchInfo.caliber === \"자동\")\n        ? { caliber: extractedSpecs.caliber }\n        : {}),\n      ...(extractedSpecs.caseSize &&\n      (!watchInfo.caseSize || watchInfo.caseSize === \"40mm\")\n        ? { caseSize: extractedSpecs.caseSize }\n        : {}),\n      ...(extractedSpecs.caseMaterial &&\n      (!watchInfo.caseMaterial || watchInfo.caseMaterial === \"스테인리스 스틸\")\n        ? { caseMaterial: extractedSpecs.caseMaterial }\n        : {}),\n      ...(extractedSpecs.waterResistance &&\n      (!watchInfo.waterResistance || watchInfo.waterResistance === \"100m\")\n        ? { waterResistance: extractedSpecs.waterResistance }\n        : {}),\n      ...(extractedSpecs.referenceNumber &&\n      watchInfo.referenceNumber === \"Unknown\"\n        ? { referenceNumber: extractedSpecs.referenceNumber }\n        : {}),\n    };\n\n    // 시계 정보와 검색 결과를 함께 반환\n    return NextResponse.json({\n      ...updatedWatchInfo,\n      webSearchResults: searchData.results.map((r) => ({\n        title: r.title,\n        url: r.url,\n        snippet: r.content.substring(0, 200) + \"...\",\n      })),\n      webSearchAnswer: searchData.answer,\n    });\n  } catch (error) {\n    console.error(\"Watch search error:\", error);\n    return NextResponse.json(\n      { error: \"시계 정보 검색 중 오류가 발생했습니다.\" },\n      { status: 500 }\n    );\n  }\n}\n\nfunction extractBrand(modelName: string): string {\n  const brands = [\n    \"Rolex\",\n    \"Omega\",\n    \"Patek Philippe\",\n    \"Audemars Piguet\",\n    \"Tudor\",\n    \"IWC\",\n    \"Cartier\",\n    \"Breitling\",\n    \"Tag Heuer\",\n    \"Seiko\",\n    \"Grand Seiko\",\n    \"Citizen\",\n    \"Casio\",\n    \"Tissot\",\n    \"Longines\",\n    \"Hamilton\",\n  ];\n  const lowerModel = modelName.toLowerCase();\n\n  // 모델명에 브랜드명이 포함되어 있는지 확인\n  for (const brand of brands) {\n    if (lowerModel.includes(brand.toLowerCase())) {\n      return brand;\n    }\n  }\n\n  // 모델명 패턴으로 브랜드 추정\n  // Seiko 모델명 패턴 (예: SWR106P1, SNE, SRP 등)\n  if (\n    /^[A-Z]{2,4}\\d{3,}/i.test(modelName) ||\n    /^(SNE|SRP|SKX|SBD|SWR)/i.test(modelName)\n  ) {\n    return \"Seiko\";\n  }\n\n  // Rolex 레퍼런스 패턴 (예: 126610LN)\n  if (/^\\d{6}[A-Z]{2}$/i.test(modelName)) {\n    return \"Rolex\";\n  }\n\n  // Omega 레퍼런스 패턴 (예: 310.30.42.50.01.002)\n  if (/^\\d{2}\\.\\d{2}\\.\\d{2}\\.\\d{2}\\.\\d{2}\\.\\d{3}$/.test(modelName)) {\n    return \"Omega\";\n  }\n\n  // 첫 번째 단어를 브랜드로 추정\n  return modelName.split(\" \")[0];\n}\n\nfunction getWatchInfo(modelName: string) {\n  const lowerModel = modelName.toLowerCase();\n\n  if (lowerModel.includes(\"submariner\")) {\n    return {\n      brand: \"Rolex\",\n      modelName: \"Submariner Date\",\n      referenceNumber: \"126610LN\",\n      caliber: \"3235\",\n      caseSize: \"41mm\",\n      caseMaterial: \"Oystersteel\",\n      waterResistance: \"300m\",\n      releaseYear: 2020,\n      msrpKrw: 13500000,\n      thumbnailUrl: \"/rolex-submariner-black-dial-watch.jpg\",\n    };\n  }\n\n  if (lowerModel.includes(\"speedmaster\")) {\n    return {\n      brand: \"Omega\",\n      modelName: \"Speedmaster Professional\",\n      referenceNumber: \"310.30.42.50.01.002\",\n      caliber: \"3861\",\n      caseSize: \"42mm\",\n      caseMaterial: \"스테인리스 스틸\",\n      waterResistance: \"50m\",\n      releaseYear: 2021,\n      msrpKrw: 9200000,\n      thumbnailUrl: \"/omega-speedmaster-moonwatch.jpg\",\n    };\n  }\n\n  if (lowerModel.includes(\"daytona\")) {\n    return {\n      brand: \"Rolex\",\n      modelName: \"Cosmograph Daytona\",\n      referenceNumber: \"126500LN\",\n      caliber: \"4131\",\n      caseSize: \"40mm\",\n      caseMaterial: \"Oystersteel\",\n      waterResistance: \"100m\",\n      releaseYear: 2023,\n      msrpKrw: 22000000,\n      thumbnailUrl: \"/rolex-daytona-chronograph-watch.jpg\",\n    };\n  }\n\n  if (lowerModel.includes(\"royal oak\")) {\n    return {\n      brand: \"Audemars Piguet\",\n      modelName: \"Royal Oak\",\n      referenceNumber: \"15500ST.OO.1220ST.01\",\n      caliber: \"4302\",\n      caseSize: \"41mm\",\n      caseMaterial: \"스테인리스 스틸\",\n      waterResistance: \"50m\",\n      releaseYear: 2019,\n      msrpKrw: 35000000,\n      thumbnailUrl: \"/luxury-wristwatch.png\",\n    };\n  }\n\n  return null;\n}\n\n// 검색 결과에서 사양 정보 추출\nfunction extractSpecsFromSearchResults(\n  results: TavilySearchResult[],\n  answer: string | undefined,\n  modelName: string\n): {\n  caliber?: string;\n  caseSize?: string;\n  caseMaterial?: string;\n  waterResistance?: string;\n  referenceNumber?: string;\n} {\n  const specs: {\n    caliber?: string;\n    caseSize?: string;\n    caseMaterial?: string;\n    waterResistance?: string;\n    referenceNumber?: string;\n  } = {};\n\n  // 모든 검색 결과 텍스트 합치기\n  const allText = [\n    answer || \"\",\n    ...results.map((r) => r.content || r.title || \"\"),\n  ]\n    .join(\" \")\n    .toLowerCase();\n\n  // 칼리버 추출 (예: \"3235\", \"3861\", \"자동\", \"automatic\")\n  const caliberPatterns = [\n    /\\b(\\d{4})\\b/g, // 4자리 숫자 (예: 3235, 3861)\n    /(자동|automatic|mechanical|quartz)/gi,\n    /caliber\\s*:?\\s*([a-z0-9\\-]+)/gi,\n    /무브먼트\\s*:?\\s*([a-z0-9\\-]+)/gi,\n  ];\n\n  for (const pattern of caliberPatterns) {\n    const match = allText.match(pattern);\n    if (match) {\n      const value = match[0].replace(/caliber|무브먼트|:|\\s/gi, \"\").trim();\n      if (value && value.length > 0) {\n        specs.caliber = value.length <= 10 ? value : specs.caliber;\n        break;\n      }\n    }\n  }\n\n  // 케이스 크기 추출 (예: \"41mm\", \"42mm\", \"40mm\")\n  const caseSizeMatch = allText.match(/(\\d+(?:\\.\\d+)?)\\s*mm/gi);\n  if (caseSizeMatch) {\n    // 가장 많이 언급된 크기 선택\n    const sizes = caseSizeMatch.map((m) => m.replace(/\\s/g, \"\"));\n    const sizeCounts = sizes.reduce((acc, size) => {\n      acc[size] = (acc[size] || 0) + 1;\n      return acc;\n    }, {} as Record<string, number>);\n    const mostCommonSize = Object.entries(sizeCounts).sort(\n      (a, b) => b[1] - a[1]\n    )[0]?.[0];\n    if (mostCommonSize) {\n      specs.caseSize = mostCommonSize;\n    }\n  }\n\n  // 케이스 소재 추출\n  const materialPatterns = [\n    /(스테인리스\\s*스틸|stainless\\s*steel|oystersteel|steel)/gi,\n    /(티타늄|titanium)/gi,\n    /(세라믹|ceramic)/gi,\n    /(골드|gold|yellow\\s*gold|white\\s*gold|rose\\s*gold)/gi,\n    /(플래티넘|platinum)/gi,\n  ];\n\n  for (const pattern of materialPatterns) {\n    const match = allText.match(pattern);\n    if (match) {\n      const material = match[0].trim();\n      if (\n        material.toLowerCase().includes(\"stainless\") ||\n        material.includes(\"스테인리스\")\n      ) {\n        specs.caseMaterial = \"스테인리스 스틸\";\n      } else if (material.toLowerCase().includes(\"oystersteel\")) {\n        specs.caseMaterial = \"Oystersteel\";\n      } else if (\n        material.toLowerCase().includes(\"titanium\") ||\n        material.includes(\"티타늄\")\n      ) {\n        specs.caseMaterial = \"티타늄\";\n      } else {\n        specs.caseMaterial = material;\n      }\n      break;\n    }\n  }\n\n  // 방수 추출 (예: \"300m\", \"50m\", \"100m\")\n  const waterResistanceMatch = allText.match(/(\\d+)\\s*m\\b/gi);\n  if (waterResistanceMatch) {\n    const resistances = waterResistanceMatch.map((m) => m.replace(/\\s/g, \"\"));\n    const resistanceCounts = resistances.reduce((acc, res) => {\n      acc[res] = (acc[res] || 0) + 1;\n      return acc;\n    }, {} as Record<string, number>);\n    const mostCommonResistance = Object.entries(resistanceCounts).sort(\n      (a, b) => b[1] - a[1]\n    )[0]?.[0];\n    if (mostCommonResistance) {\n      specs.waterResistance = mostCommonResistance;\n    }\n  }\n\n  // 레퍼런스 번호 추출 (모델명과 유사한 패턴 찾기)\n  const refPatterns = [\n    /\\b([A-Z]{1,4}\\d{3,}[A-Z0-9\\.\\-]*)\\b/g, // 예: SWR106P1, 126610LN\n    /reference[:\\s]+([A-Z0-9\\.\\-]+)/gi,\n    /레퍼런스[:\\s]+([A-Z0-9\\.\\-]+)/gi,\n    /ref[:\\s]+([A-Z0-9\\.\\-]+)/gi,\n  ];\n\n  for (const pattern of refPatterns) {\n    const matches = allText.match(pattern);\n    if (matches) {\n      // 모델명과 유사한 패턴 찾기\n      const modelPattern = modelName.replace(/\\s/g, \"\").toUpperCase();\n      const similarRef = matches.find((m) => {\n        const cleanMatch = m\n          .replace(/reference|레퍼런스|ref|:|\\s/gi, \"\")\n          .toUpperCase();\n        return (\n          cleanMatch.includes(modelPattern) || modelPattern.includes(cleanMatch)\n        );\n      });\n      if (similarRef) {\n        specs.referenceNumber = similarRef\n          .replace(/reference|레퍼런스|ref|:|\\s/gi, \"\")\n          .trim();\n        break;\n      }\n    }\n  }\n\n  return specs;\n}\n"],"names":[],"mappings":"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"}}]
}